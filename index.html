<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Primary Meta Tags -->
	<title>PSI.SG üá∏üá¨ ‚Äì Haze updates at a glance</title>
	<meta name="title" content="PSI.SG üá∏üá¨ ‚Äì Haze updates at a glance" />
	<meta name="description" content="Quick updates at a glance on PSI and PM2.5 readings for the haze situation in Singapore." />

	<!-- Open Graph / Facebook -->
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://psi.sg/" />
	<meta property="og:title" content="PSI.SG üá∏üá¨ ‚Äì Haze updates at a glance" />
	<meta property="og:description" content="Quick updates at a glance on PSI and PM2.5 readings for the haze situation in Singapore." />
	<meta property="og:image" content="https://i.ibb.co/D5GypXz/psisg-og-image.png" />

	<!-- Twitter -->
	<meta property="twitter:card" content="summary_large_image" />
	<meta property="twitter:url" content="https://psi.sg/" />
	<meta property="twitter:title" content="PSI.SG üá∏üá¨ ‚Äì Haze updates at a glance" />
	<meta property="twitter:description" content="Quick updates at a glance on PSI and PM2.5 readings for the haze situation in Singapore." />
	<meta property="twitter:image" content="https://i.ibb.co/D5GypXz/psisg-og-image.png" />

	<!-- Mobile app icon -->
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<meta name="apple-mobile-web-app-title" content="PSI.SG üá∏üá¨">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/cCGkG0S/psisg-icon-180px.png">
	<link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/cN4xnxF/psisg-icon-32px.png">
	<link rel="icon" type="image/png" sizes="16x16" href="https://i.ibb.co/cN4xnxF/psisg-icon-32px.png">

	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-2EG7RX1FNM"></script>
	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
			dataLayer.push(arguments);
		}
		gtag('js', new Date());
		gtag('config', 'G-2EG7RX1FNM');
	</script>

	<style>
		body {
			font-family: 'Arial', sans-serif;
			/*animation: fadeIn 1s ease-in-out;*/
		}

		#app {
			/*height: 100%;
			width: 100%;
			top: 10%;
			left: 10%;
			position: absolute; */
			margin-top: 6.5em;
			text-align: center;
			/* -ms-transform: translate(-50%, -50%);
			transform: translate(-50%, -50%); */
			padding: 10px;
		}

		.slide-left {
			transform: translateX(-100%);
			transition: transform 0.5s ease-in-out;
		}

		.fade-in-right {
			animation: fadeInRight 0.8s ease-in-out;
		}

		@keyframes fadeInRight {
			from {
				opacity: 0;
				transform: translateX(200%);
			}

			to {
				opacity: 1;
				transform: translateX(0%);
			}
		}

		.fade-in-left {
			animation: fadeInLeft 0.8s ease-in-out;
		}

		@keyframes fadeInLeft {
			from {
				opacity: 0;
				transform: translateX(-200%);
			}

			to {
				opacity: 1;
				transform: translateX(0%);
			}
		}

		.fade-out-in {
			animation: fade 0.8s ease-in-out forwards;
		}

		@keyframes fade {
			0% {
				opacity: 1;
			}

			50% {
				opacity: 0;
			}

			100% {
				opacity: 1;
			}
		}

		.translation-bar {
			position: absolute;
			top: 0;
			right: 0;
			padding: 1em 1.5em 0 0;
			margin: auto;
		}

		.box {
			background-color: #ffffff;
			padding: 0.8em 2em 1.2em 2em;
			border-radius: 5px;
			color: #505050 !important;
			max-width: 300px;
			margin: auto;
		}

		.time-box {
			padding: 1em 2em;
			border-radius: 5px;
			max-width: 300px;
			margin: 0 auto 3em auto;
			font-size: 0.8em;
		}

		.psi-number,
		.pm25-number {
			font-size: 15rem;
			font-weight: bold;
		}

		.info-text {
			font-size: 1em;
			font-weight: lighter;
			padding-bottom: 0.5em;
		}

		.index-text {
			font-size: 1.5em;
			margin: 0 auto 1.5em auto;
		}

		.footer {
			font-size: 0.8em;
			max-width: 400px;
			text-align: center;
			text-wrap: wrap;
			margin: auto;
		}

		.green {
			background-color: #2FA451;
			color: white;
		}

		.green .dot {
			background-color: white;
		}

		.blue {
			background-color: #0298D6;
			color: white;
		}

		.blue .dot {
			background-color: white;
		}

		.yellow {
			background-color: #FFAC30;
			color: black;
		}

		.yellow .dot {
			background-color: black;
		}

		.orange {
			background-color: #F79434;
			color: white;
		}

		.orange .dot {
			background-color: white;
		}

		.red {
			background-color: #E11B2C;
			color: white;
		}

		.red .dot {
			background-color: white;
		}

		.lightgreen {
			background-color: #48ffb0;
			color: #505050;
		}

		.lightgreen .dot {
			background-color: #505050;
		}

		.lightblue {
			background-color: #34adfd;
			color: white;
		}

		.lightblue .dot {
			background-color: white;
		}

		.lightyellow {
			background-color: #fff51b;
			color: black;
		}

		.lightyellow .dot {
			background-color: black;
		}

		.lightred {
			background-color: #ff5643;
			color: white;
		}

		.lightred .dot {
			background-color: white;
		}

		.togglegroup {
			margin: 0 auto 80px auto;
			color: #505050;
		}

		.tag {
			padding: 0.5em 1em;
			margin: 0.25em 1em;
			border-radius: 0.25em;
			border: none;
			background-color: rgba(255, 255, 255, 0.7);
			color: #505050;
			box-shadow: 2px 2px rgba(0, 0, 0, 0.2);
			font-size: 0.875em;
			font-weight: bold;
			letter-spacing: 0.05em;
			cursor: pointer;
		}

		.region-tag {
			padding: 0.25em 0.5em;
			margin: 0.2em;
			border-radius: 0.25em;
			border: none;
			background-color: rgba(255, 255, 255, 0.7);
			color: #505050;
			cursor: pointer;
			text-wrap: wrap;
			display: inline-block;
			width: 140px;
		}

		.refreshicon {
			cursor: pointer;
			position: absolute;
			margin-top: -8px;
		}

		.dot {
			height: 15px;
			width: 15px;
			/* background-color: #505050; */
			border-radius: 50%;
			display: inline-block;
			margin: 0 5px 2em 5px;
			vertical-align: middle;
			cursor: pointer;
			opacity: 0.6;
		}

		.pulse-group {
			position: relative;
			bottom: 60px;
			left: 0;
			width: 400px;
			margin: 0 auto 60px auto;
		}

		.pulse-circle {
			position: absolute;
			bottom: 31px;
			left: 24px;
			z-index: 998;
			width: 30px;
			height: 30px;
			border-radius: 50%;
			background-color: rgba(0, 0, 0, 0.4);
			animation: pulse 8s ease-in-out forwards;
		}

		.pulse-hand {
			position: absolute;
			bottom: 0px;
			left: 0px;
			/*width: 12%;*/
			z-index: 999;
			transform: rotate(45deg);
			animation: show 8s ease-in-out forwards;
			margin-bottom: 0px;
		}

		@keyframes pulse {
			0% {
				transform: scale(1);
				opacity: 0;
			}

			49% {
				transform: scale(1);
				opacity: 0;
			}

			50% {
				transform: scale(1);
				opacity: 0.7;
			}

			55% {
				transform: scale(1.3);
				opacity: 0.3;
			}

			59% {
				transform: scale(1.3);
				opacity: 0;
			}

			60% {
				transform: scale(1);
				opacity: 0.7;
			}

			65% {
				transform: scale(1.3);
				opacity: 0.3;
			}

			69% {
				transform: scale(1.3);
				opacity: 0;
			}

			70% {
				transform: scale(1);
				opacity: 0.7;
			}

			75% {
				transform: scale(1.3);
				opacity: 0.3;
			}

			79% {
				transform: scale(1.3);
				opacity: 0;
			}

			80% {
				transform: scale(1);
				opacity: 0.7;
			}

			85% {
				transform: scale(1.3);
				opacity: 0.3;
			}

			89% {
				transform: scale(1.3);
				opacity: 0;
			}

			90% {
				transform: scale(1);
				opacity: 0.7;
			}

			95% {
				transform: scale(1.3);
				opacity: 0.3;
			}

			99% {
				transform: scale(1.3);
				opacity: 0;
			}

			100% {
				transform: scale(1);
				opacity: 0;
			}
		}

		@keyframes show {
			0% {
				opacity: 0;
			}

			49% {
				opacity: 0;
			}

			50% {
				opacity: 1;
			}

			99% {
				opacity: 1;
			}

			100% {
				opacity: 0;
			}
		}

		@media only screen and (max-width: 600px) {
			#app {}

			.translation-bar {
				font-size: 0.8em;
			}

			.box {
				max-width: 250px;
			}

			.psi-number,
			.pm25-number {
				font-size: 13rem;
			}
			
			.index-text {
				font-size: 1.3em;
			}
			
			.region-tag {
				padding: 0.25em 0.5em;
				margin: 0.2em;
				width: 130px;
			}

			.footer {
				font-size: 0.8em;
				max-width: 350px;
			}

			.pulse-group {
				bottom: 50px;
				left: -13px;
				width: 350px;
			}

			.pulse-circle {
				bottom: 30px;
				left: 24px;
				width: 30px;
				height: 30px;
			}

			.pulse-hand {
				bottom: 0px;
				left: 0px;
				/*width: 12%;*/
				margin-bottom: 0px;
			}
		}
	</style>
</head>

<body>
	<div id="translationBar" class="translation-bar"><a href="https://psi-sg.translate.goog/?_x_tr_sl=en&_x_tr_tl=zh-CN&_x_tr_hl=en&_x_tr_pto=wapp" target="_blank" style="color: inherit !important">‰∏≠Êñá |&nbsp;&nbsp;</a><a href="https://psi-sg.translate.goog/?_x_tr_sl=en&_x_tr_tl=ms&_x_tr_hl=en&_x_tr_pto=wapp" target="_blank" style="color: inherit !important">Bahasa melayu |&nbsp;&nbsp;</a><a href="https://psi-sg.translate.goog/?_x_tr_sl=en&_x_tr_tl=ta&_x_tr_hl=en&_x_tr_pto=wapp" target="_blank" style="color: inherit !important">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a></div>
	<div id="app">
		<div class="togglegroup"><a @click="toggleToPm25"><span id="pm25Tag" class="tag" style="box-shadow: none;">1h PM2.5</span></a><span style="font-weight: bold; color: #505050"></span><a @click="toggleToPsi"><span id="psiTag" class="tag">24h PSI</span></a></div>

		<!-- PREFERENCE SET TO CENTRAL REGION -->
		<div v-touch:swipe.right="onSwipeRightItem" v-show="preferCentral">
			<div v-show="showPm25" :class="getPm25BackgroundColor(pm25)" class="fade-in-left">
				<div style="font-size: 2em">PM2.5<span class="refreshicon" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
				<div class="pm25-number"><span>&nbsp;</span>{{ pm25 }}<span><a @click="toggleToPsi" style="cursor: pointer;">&nbsp;</a></span></div>
				<div class="index-text">Central</div>
				<div class="index-text"><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('north')">North - {{ pm25north }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('south')">South - {{ pm25south }}</span><br /><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('east')">East - {{ pm25east }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('west')">West - {{ pm25west }}</span></div>
				<div class="pulse-group">
					<div class="pulse-circle"></div>
					<img class="pulse-hand" src="https://i.ibb.co/KWQPtVJ/double-tap-60px.png" />
				</div>
				<p class="time-box">Updated at {{ pm25time }}</p>
				<div class="index-text"><a @click="toggleToPsi"><span class="dot"></span><span class="dot" style="height: 10px; width: 10px;"></span></a></div>
				<div class="box">
					<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
					<p>Use the 1h PM2.5 readings to decide on <strong>immediate</strong> activities you're planning to do <strong>right now</strong>, like going for a jog.</p>
				</div>
				<br />
				<div class="box">
					<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
					<div class="info-text">{{ pm25Text }}</div>
				</div>
			</div>
		</div>

		<!-- PREFERENCE SET TO NORTH REGION -->
		<div v-touch:swipe.right="onSwipeRightItem" v-show="preferNorth">
			<div v-show="showPm25" :class="getPm25BackgroundColor(pm25)" class="fade-in-left">
				<div style="font-size: 2em">PM2.5<span class="refreshicon" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
				<div class="pm25-number"><span>&nbsp;</span>{{ pm25north }}<span><a @click="toggleToPsi" style="cursor: pointer;">&nbsp;</a></span></div>
				<div class="index-text">North</div>
				<div class="index-text"><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('central')">Central - {{ pm25 }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('south')">South - {{ pm25south }}</span><br /><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('east')">East - {{ pm25east }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('west')">West - {{ pm25west }}</span></div>
				<div class="pulse-group">
					<div class="pulse-circle"></div>
					<img class="pulse-hand" src="https://i.ibb.co/KWQPtVJ/double-tap-60px.png" />
				</div>
				<p class="time-box">Updated at {{ pm25time }}</p>
				<div class="index-text"><a @click="toggleToPsi"><span class="dot"></span><span class="dot" style="height: 10px; width: 10px;"></span></a></div>
				<div class="box">
					<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
					<p>Use the 1h PM2.5 readings to decide on <strong>immediate</strong> activities you're planning to do <strong>right now</strong>, like going for a jog.</p>
				</div>
				<br />
				<div class="box">
					<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
					<div class="info-text">{{ pm25Text }}</div>
				</div>
			</div>
		</div>

		<!-- PREFERENCE SET TO SOUTH REGION -->
		<div v-touch:swipe.right="onSwipeRightItem" v-show="preferSouth">
			<div v-show="showPm25" :class="getPm25BackgroundColor(pm25)" class="fade-in-left">
				<div style="font-size: 2em">PM2.5<span class="refreshicon" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
				<div class="pm25-number"><span>&nbsp;</span>{{ pm25south }}<span><a @click="toggleToPsi" style="cursor: pointer;">&nbsp;</a></span></div>
				<div class="index-text">South</div>
				<div class="index-text"><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('north')">North - {{ pm25north }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('central')">Central - {{ pm25 }}</span><br /><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('east')">East - {{ pm25east }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('west')">West - {{ pm25west }}</span></div>
				<div class="pulse-group">
					<div class="pulse-circle"></div>
					<img class="pulse-hand" src="https://i.ibb.co/KWQPtVJ/double-tap-60px.png" />
				</div>
				<p class="time-box">Updated at {{ pm25time }}</p>
				<div class="index-text"><a @click="toggleToPsi"><span class="dot"></span><span class="dot" style="height: 10px; width: 10px;"></span></a></div>
				<div class="box">
					<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
					<p>Use the 1h PM2.5 readings to decide on <strong>immediate</strong> activities you're planning to do <strong>right now</strong>, like going for a jog.</p>
				</div>
				<br />
				<div class="box">
					<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
					<div class="info-text">{{ pm25Text }}</div>
				</div>
			</div>
		</div>

		<!-- PREFERENCE SET TO EAST REGION -->
		<div v-touch:swipe.right="onSwipeRightItem" v-show="preferEast">
			<div v-show="showPm25" :class="getPm25BackgroundColor(pm25)" class="fade-in-left">
				<div style="font-size: 2em">PM2.5<span class="refreshicon" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
				<div class="pm25-number"><span>&nbsp;</span>{{ pm25east }}<span><a @click="toggleToPsi" style="cursor: pointer;">&nbsp;</a></span></div>
				<div class="index-text">East</div>
				<div class="index-text"><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('north')">North - {{ pm25north }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('south')">South - {{ pm25south }}</span><br /><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('central')">Central - {{ pm25 }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('west')">West - {{ pm25west }}</span></div>
				<div class="pulse-group">
					<div class="pulse-circle"></div>
					<img class="pulse-hand" src="https://i.ibb.co/KWQPtVJ/double-tap-60px.png" />
				</div>
				<p class="time-box">Updated at {{ pm25time }}</p>
				<div class="index-text"><a @click="toggleToPsi"><span class="dot"></span><span class="dot" style="height: 10px; width: 10px;"></span></a></div>
				<div class="box">
					<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
					<p>Use the 1h PM2.5 readings to decide on <strong>immediate</strong> activities you're planning to do <strong>right now</strong>, like going for a jog.</p>
				</div>
				<br />
				<div class="box">
					<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
					<div class="info-text">{{ pm25Text }}</div>
				</div>
			</div>
		</div>

		<!-- PREFERENCE SET TO WEST REGION -->
		<div v-touch:swipe.right="onSwipeRightItem" v-show="preferWest">
			<div v-show="showPm25" :class="getPm25BackgroundColor(pm25)" class="fade-in-left">
				<div style="font-size: 2em">PM2.5<span class="refreshicon" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
				<div class="pm25-number"><span>&nbsp;</span>{{ pm25west }}<span><a @click="toggleToPsi" style="cursor: pointer;">&nbsp;</a></span></div>
				<div class="index-text">West</div>
				<div class="index-text"><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('north')">North - {{ pm25north }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('south')">South - {{ pm25south }}</span><br /><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('east')">East - {{ pm25east }}</span><span class="region-tag" style="cursor: pointer;" @click="toggleRegion('central')">Central - {{ pm25 }}</span></div>
				<div class="pulse-group">
					<div class="pulse-circle"></div>
					<img class="pulse-hand" src="https://i.ibb.co/KWQPtVJ/double-tap-60px.png" />
				</div>
				<p class="time-box">Updated at {{ pm25time }}</p>
				<div class="index-text"><a @click="toggleToPsi"><span class="dot"></span><span class="dot" style="height: 10px; width: 10px;"></span></a></div>
				<div class="box">
					<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
					<p>Use the 1h PM2.5 readings to decide on <strong>immediate</strong> activities you're planning to do <strong>right now</strong>, like going for a jog.</p>
				</div>
				<br />
				<div class="box">
					<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
					<div class="info-text">{{ pm25Text }}</div>
				</div>
			</div>
		</div>

		<!-- PSI page -->
		<div v-show="showPSI" v-touch:swipe.left="onSwipeLeftItem" :class="getPsiBackgroundColor(psi)" class="fade-in-right">
			<div style="font-size: 2em">PSI<span class="refreshicon" style="cursor: pointer" @click="refresh">&nbsp; &#10227;&#xFE0E;</span></div>
			<div class="psi-number"><span><a @click="toggleToPm25" style="cursor: pointer;">&nbsp;</a></span>{{ psi }}<span>&nbsp;</span></div>
			<div class="time-box">Updated at {{ psitime }}</div>
			<!-- <p class="output">Current Touch Event:
				<span class="event">{{ name }}</span>
			</p> -->
			<div class="index-text"><a @click="toggleToPm25"><span class="dot" style="height: 10px; width: 10px;"></span><span class="dot"></span></a></div>
			<div class="box">
				<p><strong>&#x24D8;&#xFE0E; How to use this reading:</strong></p>
				<p>Use the 24h PSI forecast to plan your activities for <strong>tomorrow</strong>.</p>
			</div>
			<br />
			<div class="box">
				<p><strong>&#x26A0;&#xFE0E; Health advisory: What you can do</strong></p>
				<div class="info-text">{{ psiText }}</div>
			</div>
		</div>
		<br /><br />
		‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî
		<br /><br />
		<div class="footer">
			<p>Made by <a href="https://buymeacoffee.com/jasonleowsg" style="color: inherit !important" target="_blank">@jasonleowsg</a>.If you like this, please support more community projects by buying me a coffee &#9660;&#xFE0E;</p>
			<br />
			<a href="https://www.buymeacoffee.com/jasonleowsg" target="_blank" style="border-color: #eee !important;"><img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 42px !important;width: 150px !important"></a>
		</div>
		<br /><br /><br />
		<details class="footer">
			<summary>Add this web app to your phone's home screen! Here's how:</summary>
			<div class="box" style="margin-top: 1em; text-align: left !important">
				<p><strong>iOS</strong>
				<ul>
					<li>Open this site in Safari</li>
					<li>Tap on Share button</li>
					<li>Select Add to Home Screen</li>
				</ul>

				<strong>Android</strong>
				<ul>
					<li>Open this site in Chrome</li>
					<li>Tap on the menu icon (3 dots in upper right-hand corner)</li>
					<li>Tap Add to home screen</li>
				</ul>
				</p>
			</div>
		</details>
		<br />
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.8/vue.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue2-touch-events@3.2.3/index.min.js"></script>
	<script>
		new Vue({
			el: '#app',
			data: {
				psi: 0,
				pm25: 0,
				pm25north: 0,
				pm25south: 0,
				pm25east: 0,
				pm25west: 0,
				showPm25: true,
				showPSI: false,
				psiText: '',
				pm25Text: '',
				preferCentral: true,
				preferNorth: false,
				preferSouth: false,
				preferEast: false,
				preferWest: false,
				name: "none",
			},
			created() {
				this.fetchAirQualityData();
				// You can set an interval to update the data periodically
				// setInterval(this.fetchAirQualityData, 60000); // Update every minute 
			},
			mounted() {
				this.setRegion()
				this.changePm25BackgroundColor()
				// this.changePsiBackgroundColor()
				this.getPsiAdvisory()
				this.getPm25Advisory()
			},
			methods: {
				nameCurrentEvent(name) {
					this.name = name;
					console.log(name);
				},
				onSwipeLeftItem() {
					this.name = "swiped left";
					this.toggleToPm25();
				},
				onSwipeRightItem() {
					this.name = "swiped right";
					this.toggleToPsi();
				},
				fetchAirQualityData() {
					// https://api.data.gov.sg/v1/environment/psi
					fetch('https://api.data.gov.sg/v1/environment/psi')
						.then(response => response.json())
						.then(data => {
							const items = data.items[0];
							this.psitime = this.getLocaleTimestamp(items.update_timestamp)
							this.psi = items.readings.psi_twenty_four_hourly.national;
							console.log("this.psi", this.psi)
						})
						.catch(error => console.error('Error fetching data:', error));
					// https://api.data.gov.sg/v1/environment/pm25
					fetch('https://api.data.gov.sg/v1/environment/pm25')
						.then(response => response.json())
						.then(data => {
							const items = data.items[0];
							this.pm25time = this.getLocaleTimestamp(items.update_timestamp)
							console.log("this.pm25time", this.pm25time)
							this.pm25 = items.readings.pm25_one_hourly.central
							console.log("this.pm25", this.pm25)
							this.pm25north = items.readings.pm25_one_hourly.north
							this.pm25south = items.readings.pm25_one_hourly.south
							this.pm25east = items.readings.pm25_one_hourly.east
							this.pm25west = items.readings.pm25_one_hourly.west
						})
						.catch(error => console.error('Error fetching data:', error));
				},
				getLocaleTimestamp(t) {
					const localDate = new Date(t).toLocaleDateString("en-SG", {
						day: "2-digit",
						month: "short",
						year: "numeric",
						hour: "2-digit",
						minute: "2-digit",
						hour12: true
					});
					console.log(localDate);
					return localDate;
				},
				getPsiBackgroundColor(value) {
					if (value <= 50) return 'green';
					else if (value <= 100) return 'blue';
					else if (value <= 200) return 'yellow';
					else if (value <= 300) return 'orange';
					else return 'red';
				},
				getPm25BackgroundColor(value) {
					if (value <= 55) return 'lightgreen';
					else if (value <= 150) return 'lightblue';
					else if (value <= 250) return 'lightyellow';
					else return 'lightred';
				},
				changePm25BackgroundColor() {
					document.body.classList.add(this.getPm25BackgroundColor(this.pm25));
				},
				changePsiBackgroundColor() {
					document.body.classList.add(this.getPsiBackgroundColor(this.psi));
				},
				toggleToPsi() {
					this.showPSI = true;
					this.showPm25 = false;
					document.body.classList.remove(this.getPm25BackgroundColor(this.pm25));
					document.body.classList.add(this.getPsiBackgroundColor(this.psi));
					document.getElementById('pm25Tag').style.opacity = 0.7;
					document.getElementById('psiTag').style.opacity = 1;
					document.getElementById('pm25Tag').style.boxShadow = "2px 2px rgba(0,0,0,0.2)";
					document.getElementById('psiTag').style.boxShadow = "none";
					this.fetchAirQualityData()
				},
				toggleToPm25() {
					this.showPSI = false;
					this.showPm25 = true;
					document.body.classList.remove(this.getPsiBackgroundColor(this.psi));
					document.body.classList.add(this.getPm25BackgroundColor(this.pm25));
					document.getElementById('psiTag').style.opacity = 0.7;
					document.getElementById('pm25Tag').style.opacity = 1;
					document.getElementById('psiTag').style.boxShadow = "2px 2px rgba(0,0,0,0.2)";
					document.getElementById('pm25Tag').style.boxShadow = "none";
					this.fetchAirQualityData()
				},
				getPsiAdvisory() {
					if (this.psi <= 50) {
						this.psiText = 'Normal activities.';
					} else if (this.psi <= 100) {
						this.psiText = 'Normal activities.';
					} else if (this.psi <= 200) {
						this.psiText = 'Do less of prolonged or strenous outdoor exertion. Vulnerable persons ‚Äì do not do strenuous outdoor activity for the next hour.';
					} else if (this.psi <= 300) {
						this.psiText = 'Do not do prolonged or strenous outdoor exertion. Vulnerable persons ‚Äì do not do all outdoor activity for the next hour.';
					} else {
						this.psiText = 'Do as little as possible all outdoor activity. Vulnerable persons ‚Äì do not do all outdoor activity for the next hour.';
					}
					console.log('toggle to this.psi', this.psi)
				},
				getPm25Advisory() {
					if (this.pm25 <= 55) {
						this.pm25Text = 'Continue with normal activities.';
					} else if (this.psi <= 150) {
						this.pm25Text = 'Do less strenuous outdoor activity for the next hour. Vulnerable persons ‚Äì Do not do strenuous outdoor activity for the next hour.';
					} else if (this.psi <= 250) {
						this.pm25Text = 'Do not do strenuous outdoor activity for the next hour. Vulnerable persons ‚Äì do not do all outdoor activity for the next hour.';
					} else {
						this.pm25Text = 'Do as little as possible all outdoor activity for the next hour. Vulnerable persons ‚Äì do not do all outdoor activity for the next hour.';
					}
					console.log('toggle to this.pm25', this.pm25)
				},
				/* agetPm25Advisory() {
					if (value <= 55) return 'lightgreen';
					else if (value <= 150) return 'lightblue';
					else if (value <= 250) return 'lightyellow';
					else return 'lightred';
				}, */
				refresh() {
					this.fetchAirQualityData();
					document.body.classList.add('fade-out-in', true)
					setTimeout(function() {
						document.body.classList.remove('fade-out-in')
					}, 1000);
				},
				toggleRegion(r) {
					if (r == 'central') {
						this.preferCentral = true;
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('central'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (r == 'north') {
						this.preferCentral = false;
						this.preferNorth = true
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('north'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (r == 'south') {
						this.preferNorth = false;
						this.preferSouth = true
						this.preferCentral = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('south'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (r == 'east') {
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferCentral = false;
						this.preferEast = true
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('east'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (r == 'west') {
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = true
						this.preferCentral = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('west'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else {
						// 
					}
				},
				setRegion() {
					const regionPreference = JSON.parse(localStorage.getItem('regionPreference'));
					console.log('regionPreference', regionPreference)
					if (regionPreference == 'central') {
						this.preferCentral = true;
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('central'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (regionPreference == 'north') {
						this.preferCentral = false;
						this.preferNorth = true
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('north'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (regionPreference == 'south') {
						this.preferNorth = false;
						this.preferSouth = true
						this.preferCentral = false;
						this.preferEast = false;
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('south'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (regionPreference == 'east') {
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferCentral = false;
						this.preferEast = true
						this.preferWest = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('east'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else if (regionPreference == 'west') {
						this.preferNorth = false;
						this.preferSouth = false;
						this.preferEast = false;
						this.preferWest = true
						this.preferCentral = false;
						localStorage.removeItem('regionPreference');
						localStorage.setItem('regionPreference', JSON.stringify('west'));
						console.log('localStorage - regionPreference', localStorage.getItem('regionPreference'));
					} else {
						// 
					}
				},
			}
		});
	</script>
</body>

</html>
